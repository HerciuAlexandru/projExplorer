
<% layout('layouts/boilerplate.ejs') %> 
<div id='cluster-map'></div>
<div class="container">
  <h1>All farms</h1>
  
  <% for (let farm of farms){%>
  <div class="card mb-3" >
      <div class="row">
          <div class="col-md-4">
              <%if(farm.image.length) {%>
              <img class="img-fluid" alt="" src="<%=farm.image[0].url%>">
              <% }else {%>
              <img class="img-fluid" alt=""
                  src="https://res.cloudinary.com/dcmoi0lpr/image/upload/v1668181723/explorerShop/ldnzrm7skipgvbekt6io.jpg">
              <% } %>
          </div>
          <div class="col-md-8">
              <div class="card-body">
                  <h5 class="card-title"><%= farm.name %> </h5>
                  <p class="card-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Incidunt natus voluptas vel itaque harum animi quaerat molestiae alias vitae, velit dolore nobis, quidem dolores, quae similique repudiandae vero aliquid culpa.</p>
                  <p class="card-text">
                      <small class="text-muted"><%= farm.location%></small>
                  </p>
                  <a class="btn btn-primary" href="/farms/<%=farm._id%>">View <%=farm.title%></a>
              </div>
          </div>
      </div>
  </div>
  <% }%>
  </div>
<!-- 
  <div class="container d-flex flex-wrap">
  
    <% for(let farm of farms){ %> 
      <div class="card mb-3 mx-3" style="width: 500px">
        <% if(farm.image.length){ %> 
        <img src="<%= farm.image[0].url %>" class="card-img-top" alt="...">
        <% } else { %>
          <img src="https://res.cloudinary.com/dcmoi0lpr/image/upload/v1668181723/explorerShop/ldnzrm7skipgvbekt6io.jpg" class="card-img-top" alt="farm pic"> <% } %> 
          <div class="card-body">
            <h5 class="card-title">Farm name :<%=farm.name %></h5>
            <p class="card-text">Farm origin:<%= farm.location %> </p>
            <a class="card-link btn btn-info" href="/farms/<%= farm._id %>">Details</a>
          </div>
          
        </div>
      <% } %> 
    </div> -->

    
  <script>
    const mapToken = `<%-process.env.MAPBOX_TOKEN%>`
    const farms = {features:<%- JSON.stringify(farms) %>}
</script>

  <script src="/javascripts/indexClusterMap.js"></script>